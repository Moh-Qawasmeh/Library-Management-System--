<div class="container mt-4">
  <h1 class="mb-4">Reports</h1>

  <div class="card mb-4">
    <div class="card-body">
      <%= form_with url: reports_path, method: :get, local: true do %>
        <div class="row g-3 align-items-end">
          <div class="col-md-4">
            <label class="form-label">Select Report Type</label>
            <select name="report_type" class="form-select" onchange="this.form.submit()">
              <option value="">-- Choose Report --</option>
              <option value="books_count_by_category" <%= "selected" if @report_type == "books_count_by_category" %>>Books Count by Category</option>
              <option value="books_by_category" <%= "selected" if @report_type == "books_by_category" %>>Books by Category</option>
              <option value="books_with_comment_count" <%= "selected" if @report_type == "books_with_comment_count" %>>Books with Comment Count</option>
              <option value="authors_with_most_comments" <%= "selected" if @report_type == "authors_with_most_comments" %>>Top Authors by Comments</option>
            </select>
          </div>

          <% if @report_type == "books_by_category" %>
            <div class="col-md-4">
              <label class="form-label">Select Category</label>
              <select name="category_id" class="form-select" onchange="this.form.submit()">
                <option value="">-- Choose Category --</option>
                <% @categories.each do |cat| %>
                  <option value="<%= cat.id %>" <%= "selected" if @category_id.to_i == cat.id %>>
                    <%= cat.name %>
                  </option>
                <% end %>
              </select>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <div>
    <%= render @report_type if @report_type.present? %>
  </div>
</div>
