<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold"><%= @author.name %></h1>

    <% if current_user&.admin? %>
      <div>
        <%= link_to "Edit Author", edit_author_path(@author),
                    class: "btn btn-warning me-2" %>

        <%= link_to "Delete Author", author_path(@author),
                    method: :delete,
                    data: { confirm: "Are you sure?" },
                    class: "btn btn-danger" %>
      </div>
    <% end %>
  </div>

  <div class="card shadow-sm mb-4">
    <div class="card-header bg-dark text-white">Author Information</div>
    <div class="card-body">

      <p><strong>Bio:</strong> <%= @author.bio.presence || "N/A" %></p>

      <p><strong>Birth Date:</strong>
        <%= @author.birth_date ?
              @author.birth_date.strftime("%B %d, %Y") :
              "Not provided" %>
      </p>

      <p><strong>Email:</strong> <%= @author.email %></p>
      <p><strong>Phone:</strong> <%= @author.phone_number %></p>

    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-6 mb-3">
      <div class="card text-center shadow-sm">
        <div class="card-body">
          <h5 class="card-title fw-bold">Total Books</h5>
          <p class="display-6"><%= @author.books.count %></p>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <div class="card text-center shadow-sm">
        <div class="card-body">
          <h5 class="card-title fw-bold">Total Comments</h5>
          <p class="display-6">
            <%= @author.books.joins(:comments).count %>
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
      Books by <%= @author.name %>
    </div>

    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <thead class="table-light">
        <tr>
          <th>Title</th>
          <th>Created</th>
          <th>Comments</th>
        </tr>
        </thead>

        <tbody>
        <% @books.each do |book| %>
          <tr>
            <td>
              <%= link_to book.title, book_path(book), class: "text-primary fw-semibold" %>
            </td>

            <td><%= book.created_at.to_date %></td>

            <td><%= book.comments.count %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>

</div>

